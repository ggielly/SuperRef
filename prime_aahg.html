<!DOCTYPE html>

<!--
Générateur de simulation de primes et historique des rémunération 
guillaume ar0base rootshell.fr pour l'AAHG.
2024 - Tous droits réservés à l'AAHG- GPL3
-->

<html lang="fr">
<head>
<meta charset="UTF-8"/>
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>


<title>Graphique des données</title>
    <!-- Inclure Chart.js -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>


<style>
  table {
      width: 100%;
      border-collapse: collapse;
  }
  th, td {
      border: 1px solid black;
      padding: 8px;
      text-align: center;
  }
  th {
      background-color: #f2f2f2;
  }
</style>


</head>

<body>

<h2>Veuillez saisir les données ci-dessous et cliquer sur envoyer</h2>

<h3>Nouveaux Tarifs</h3>
<form id="nouveauxTarifsForm">
  <label for="matchCount">Nombre de match :</label>
  <input type="text" id="matchCount" name="matchCount" required><br><br>
  <label for="primeAmount">Montant de la prime :</label>
  <select id="primeAmount" name="primeAmount" required>
    <option value="500">500€</option>
    <option value="400">400€</option>
  </select><br><br>
  <label for="hotelPrice">Prix de l'hôtel moyen :</label>
  <input type="text" id="hotelPrice" name="hotelPrice" required><br><br>
  <label for="nightsCount">Nombre de nuit à l'hôtel :</label>
  <input type="text" id="nightsCount" name="nightsCount" required><br><br>
</form>

<h3>Anciens Tarifs</h3>
<form id="anciensTarifsForm">
  <label for="prepIndemnity">Montant de l'indemnité de préparation :</label>
  <input type="text" id="prepIndemnity" name="prepIndemnity" required><br><br>
  <label for="averageCost">Coûts moyens engagés sur l'ensemble des matchs passés :</label>
  <input type="text" id="averageCost" name="averageCost" required><br><br>
  <label for="bncProfit">Bénéfices calculés au titre des BNC :</label>
  <input type="text" id="bncProfit" name="bncProfit" required><br><br>
</form>

<h3>Fiscalité</h3>
<form id="fiscaliteForm">
  <label for="incomeTax">Revenu fiscal de référence :</label>
  <input type="text" id="incomeTax" name="incomeTax" required><br><br>
</form>

<button onclick="calculate()">Envoyer</button>

<div id="results"></div>

<script>
function calculate() {
  // Récupération des valeurs
  var matchCount = parseFloat(document.getElementById("matchCount").value);
  var primeAmount = parseFloat(document.getElementById("primeAmount").value);
  var hotelPrice = parseFloat(document.getElementById("hotelPrice").value);
  var nightsCount = parseFloat(document.getElementById("nightsCount").value);
  var prepIndemnity = parseFloat(document.getElementById("prepIndemnity").value);
  var averageCost = parseFloat(document.getElementById("averageCost").value);
  var bncProfit = parseFloat(document.getElementById("bncProfit").value);
  var incomeTax = parseFloat(document.getElementById("incomeTax").value);

  // Vérification des données numériques
  if (isNaN(matchCount) || isNaN(hotelPrice) || isNaN(nightsCount) || isNaN(prepIndemnity) || isNaN(averageCost) || isNaN(bncProfit) || isNaN(incomeTax)) {
    document.getElementById("results").innerText = "Veuillez saisir des données numériques uniquement.";
    return;
  }

  // Calculs
  var primeTotal = matchCount * primeAmount;
  var impotsTI = 0.25 * primeTotal;
  var beneficesTI = primeTotal - impotsTI;
  var beneficesTotal = primeTotal - impotsTI;
  var impotsTNS = 0.45 * primeTotal;
  var beneficesTNS = primeTotal - impotsTNS;
  var indemnityTotal = matchCount * prepIndemnity;
  var beneficesAnciensTarifs = matchCount * prepIndemnity - averageCost;
  var beneficesNouveauxTarifs = matchCount * bncProfit;

  // Affichage des résultats
  var resultText = "";
  resultText += "<table border='1'>";
  resultText += "<tr><th colspan='2'>Travailleur indépendant (uberRef)</th></tr>";
  resultText += "<tr><td>Chiffre d'affaire :</td><td>" + formatNumber(primeTotal.toFixed(2)) + "</td></tr>";
  resultText += "<tr><td>Le montant de l'impot TI est donc de :</td><td>" + formatNumber(impotsTI.toFixed(2)) + "</td></tr>";
  resultText += "<tr><td>Bénéfices :</td><td>" + formatNumber(beneficesTotal.toFixed(2)) + "</td></tr>";
  resultText += "<tr><th colspan='2'>Travailleur non salarié (TNS)</th></tr>";
  resultText += "<tr><td>Le montant des impots en TNS est de :</td><td>" + formatNumber(impotsTNS.toFixed(2)) + "</td></tr>";
  resultText += "<tr><td>Bénéfices :</td><td>" + formatNumber((primeTotal - impotsTNS).toFixed(2)) + "</td></tr>";
  resultText += "<tr><th colspan='2'>Ancien calcul</th></tr>";
  resultText += "<tr><td>Montant de l'indemnité de préparation total :</td><td>" + formatNumber(indemnityTotal.toFixed(2)) + "</td></tr>";
  resultText += "<tr><td>Bénéfices net avec l'ancien tarif :</td><td>" + formatNumber(beneficesAnciensTarifs.toFixed(2)) + "</td></tr>";
  resultText += "<tr><td>Bénéfices :</td><td>" + formatNumber((matchCount * bncProfit).toFixed(2)) + "</td></tr>";
  resultText += "</table>";

  document.getElementById("results").innerHTML = resultText;
}

// Formatage des nombres par groupes de trois
function formatNumber(number) {
  return number.toString().replace(/\B(?=(\d{3})+(?!\d))/g, ",");
}
</script>
<br>
<br>

<h2>Historique des tarifs</h2>
<table class="table table-bordered table-hover table-condensed" style="width: 100%">

    <thead>
        <tr>
            <th>Saison</th>
            <th>HeadL Mamicaux</th>
            <th>HeadL MSR</th>
            <th>HeadL MPO</th>
            <th>HeadD1 amicaux</th>
            <th>HeadD1 SR</th>
            <th>HeadD1 PO</th>
            <th>JDL amicaux</th>
            <th>JDL amicaux SR</th>
            <th>JDL amicaux PO</th>
            <th>JDL amicaux D1</th>
            <th>JDL amicaux D1 SR</th>
            <th>JDL amicaux D1 PO</th>
            <th>Grand Déplacement</th>
            <th>Hôtel</th>
            <th>Km</th>
            <th>Repas</th>
            <th>Taux d'inflation</th>
            <th>Gazole</th>
            <th>Variation Km</th>
        </tr>
    </thead>
    <tbody id="dataBody">
    </tbody>
</table>

<canvas id="myChart" width="800" height="400"></canvas>
<script>

/*

*/

    const saison = [2005,2006,2010,2011,2012,2013,2014,2015,2016,2017,2018,2019,2020,2021,2022,2023];
    const HeadLMamicaux = [120,126,126,130,130,135,135,135,115,115,115,125,130,130,130,130];
    const HeadLMSR = [120,126,126,130,130,135,135,135,140,140,140,140,145,145,145,145];
    const HeadLMPO = [220,231,185,185,185,190,190,190,140,140,140,140,145,145,145,145];
    const HeadD1amicaux = [95,100,100,105,105,110,110,110,100,100,100,100,105,105,105,105];
    const HeadD1SR = [95,100,100,105,105,110,110,110,115,115,115,115,120,120,120,120];
    const HeadD1PO = [120,126,126,130,130,135,135,135,115,115,115,115,120,120,120,120];
    const JDLamicaux = [85,90,90,95,95,100,100,100,90,90,90,95,100,100,100,100];
    const JDLamicauxSR = [85,90,90,95,95,100,100,100,110,110,110,110,115,115,115,115];
    const JDLamicauxPO = [95,100,120,120,120,125,125,125,110,110,110,110,115,115,115,115];
    const JDLamicauxD1 = [70,74,74,80,80,85,85,85,70,70,70,85,90,90,90,90];
    const JDLamicauxD1SR = [70,74,74,95,80,85,85,85,100,100,100,100,105,105,105,105];
    const JDLamicauxD1PO = [85,90,90,95,95,100,100,100,100,100,100,100,105,105,105,105];
    const GrandDeplacement = [70,80,80,80,80,80,80,80,80,80,80,80,80,80,80,80];
    const Hotel = [46.6,59.6,61.2,62.2,62.2,64.1,64.7,65.3,65.8,73.9,74.9,75.6,76.1,77.2,77.2,];
    const Km = [0.315,0.343,0.359,0.359,0.359,0.362,0.364,0.364,0.364,0.364,0.364,0.368,0.368,0.405,0.405];
    const Repas = [15.2,16.6,17.1,17.4,17.4,17.9,18.1,18.3,18.4,18.6,18.8,19,19.1,19.4,19.4];
    const TauxInflation = [1.7,1.5,2.1,2.0,0.9,0.5,0.0,0.2,1.0,1.8,1.1,0.5,1.6,5.5,4.9];
    const Gazole = [1.093,1.285,1.401,1.380,1.333,1.216,1.097,1.200,1.363,1.453,1.346,1.343,1.769,1.769];
    const VariationKmArray = [0,8.9,4.7,0,0,0.8,0.6,0,0,0,0,0,1.1,0,10.1];

    const tbody = document.getElementById('dataBody');

    for (let i = 0; i < saison.length; i++) {
        const tr = document.createElement('tr');
        tr.innerHTML = `
            <td>${saison[i]}</td>
            <td>${HeadLMamicaux[i]}</td>
            <td>${HeadLMSR[i]}</td>
            <td>${HeadLMPO[i]}</td>
            <td>${HeadD1amicaux[i]}</td>
            <td>${HeadD1SR[i]}</td>
            <td>${HeadD1PO[i]}</td>
            <td>${JDLamicaux[i]}</td>
            <td>${JDLamicauxSR[i]}</td>
            <td>${JDLamicauxPO[i]}</td>
            <td>${JDLamicauxD1[i]}</td>
            <td>${JDLamicauxD1SR[i]}</td>
            <td>${JDLamicauxD1PO[i]}</td>
            <td>${GrandDeplacement[i]}</td>
            <td>${Hotel[i]}</td>
            <td>${Km[i]}</td>
            <td>${Repas[i]}</td>
            <td>${TauxInflation[i]}</td>
            <td>${Gazole[i]}</td>
            <td>${VariationKmArray[i]}</td>
        `;
        tbody.appendChild(tr);
    }


    // Création d'un contexte de dessin sur le canvas
    const ctx = document.getElementById('myChart').getContext('2d');

// Création du graphe
const myChart = new Chart(ctx, {
    type: 'line',
    data: {
        labels: saison,
        datasets: [{
            label: 'HeadL Mamicaux',
            data: HeadLMamicaux,
            borderColor: 'red',
            fill: false
        }, {
            label: 'HeadL MSR',
            data: HeadLMSR,
            borderColor: 'blue',
            fill: false
        }, {
            label: 'HeadL MPO',
            data: HeadLMPO,
            borderColor: 'green',
            fill: false
        }, {
            label: 'HeadD1 amicaux',
            data: HeadD1amicaux,
            borderColor: 'orange',
            fill: false
        }, {
            label: 'HeadD1 SR',
            data: HeadD1SR,
            borderColor: 'purple',
            fill: false
        }, {
            label: 'HeadD1 PO',
            data: HeadD1PO,
            borderColor: 'brown',
            fill: false
        }, {
            label: 'JDL amicaux',
            data: JDLamicaux,
            borderColor: 'black',
            fill: false
        }, {
            label: 'JDL amicaux SR',
            data: JDLamicauxSR,
            borderColor: 'cyan',
            fill: false
        }, {
            label: 'JDL amicaux PO',
            data: JDLamicauxPO,
            borderColor: 'magenta',
            fill: false
        }, {
            label: 'JDL amicaux D1',
            data: JDLamicauxD1,
            borderColor: 'yellow',
            fill: false
        }, {
            label: 'JDL amicaux D1 SR',
            data: JDLamicauxD1SR,
            borderColor: 'lime',
            fill: false
        }, {
            label: 'JDL amicaux D1 PO',
            data: JDLamicauxD1PO,
            borderColor: 'olive',
            fill: false
        }, {
            label: 'Grand Déplacement',
            data: GrandDeplacement,
            borderColor: 'navy',
            fill: false
        }, {
            label: 'Hôtel',
            data: Hotel,
            borderColor: 'teal',
            fill: false
        }, {
            label: 'Km',
            data: Km,
            borderColor: 'maroon',
            fill: false
        }, {
            label: 'Repas',
            data: Repas,
            borderColor: 'pink',
            fill: false
        }, {
            label: 'Taux d\'inflation',
            data: TauxInflation,
            borderColor: 'silver',
            fill: false
        }, {
            label: 'Gazole',
            data: Gazole,
            borderColor: 'gold',
            fill: false
        }, {
            label: 'Variation Km',
            data: VariationKmArray,
            borderColor: 'indigo',
            fill: false
        }]
    },
    options: {
        responsive: false,
        scales: {
            yAxes: [{
                ticks: {
                    beginAtZero: true
                }
            }]
        }
    }
});
</script>



  



<br><br><br>
Association des arbitres de hockey sur glace 2024 - Tous droits réservés - <br>
Code source en licence GPL3 : <a href="//github.com/ggielly/SuperRef">Github</a> <br>
Les données sont fournies à titre indicatif et ne sauraient engager la responsabilité de l'association.<br>
En cas d'erreur merci de nous contacter à l'adresse suivante : <a href="mailto:guillaume ar0base rootshell.fr">

</body>
</html>
